# SPDX-License-Identifier: (GPL-2.0-only OR BSD-2-Clause)
%YAML 1.2
---
$id: http://devicetree.org/schemas/opp/opp-v2-qcom-adreno.yaml#
$schema: http://devicetree.org/meta-schemas/core.yaml#

title: Qualcomm Adreno compatible OPP supply

description:
  Adreno GPUs present in Qualcomm's Snapdragon chipsets uses an OPP specific
  ACD related information tailored for the specific chipset. This binding
  provides the information needed to describe such a hardware value.

maintainers:
  - Rob Clark <robdclark@gmail.com>

allOf:
  - $ref: opp-v2-base.yaml#

properties:
  compatible:
    const: operating-points-v2-adreno

patternProperties:
  '^opp-?[0-9]+$':
    type: object
    additionalProperties: false

    properties:
      opp-hz: true

      opp-level: true

      opp-peak-kBps: true

      opp-supported-hw: true

      qcom,opp-acd-level:
        description: |
          A positive value representing the acd level associated with this
          OPP node. This value is shared to GMU during GPU wake up. It may
          not be present for some OPPs and GMU will disable ACD while
          transitioning to that OPP.
        $ref: /schemas/types.yaml#/definitions/uint32

    required:
      - opp-hz
      - opp-level

required:
  - compatible

additionalProperties: false

examples:
  - |

    #include <dt-bindings/power/qcom-rpmpd.h>

    gpu_opp_table: opp-table {
        compatible = "operating-points-v2-adreno";

        opp-550000000 {
                opp-hz = /bits/ 64 <550000000>;
                opp-level = <RPMH_REGULATOR_LEVEL_SVS>;
                opp-peak-kBps = <6074219>;
                qcom,opp-acd-level = <0xc0285ffd>;
        };

        opp-390000000 {
                opp-hz = /bits/ 64 <390000000>;
                opp-level = <RPMH_REGULATOR_LEVEL_LOW_SVS>;
                opp-peak-kBps = <3000000>;
                qcom,opp-acd-level = <0xc0285ffd>;
        };

        opp-300000000 {
                opp-hz = /bits/ 64 <300000000>;
                opp-level = <RPMH_REGULATOR_LEVEL_LOW_SVS_D1>;
                opp-peak-kBps = <2136719>;
                /* Intentionally left out qcom,opp-acd-level property here */
        };

    };
